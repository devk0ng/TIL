# API Composition vs CQRS Pattern

ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¡œ ì „ì²´ êµ¬ì„±ì„ í•˜ì˜€ë‹¤ê³  ê°€ì •ì„ í•´ë³´ìž!

íŠ¹ì • ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ë…€ì„ì„ Aë¼ê³  ê°€ì •í•´ë³¸ë‹·. ê·¸ë¦¬ê³  Aë¡œ ì „ë‹¬ëœ í´ë¼ì´ì–¸íŠ¸ì˜ requestë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œëŠ” Aì¹œêµ¬ëŠ” ë‹¤ë¥¸ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ B,C,Dì—ì„œ ì œê³µí•˜ëŠ” ì •ë³´ë¥¼ ì¡°í•©í•´ì„œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ìµœì¢…ì ì¸ ê²°ê³¼ë¥¼ ì£¼ì–´ì•¼í•œë‹·

ì´ë•Œ, ì´ ìƒí™©ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìžˆëŠ” ë°©ë²•ì´ 2ê°€ì§€ ì¡´ìž¬í•´!!

ë°”ë¡œ~ API Compositionê³¼ CQRSì•¼!!

### 1. API Composition

ë¨¼ì € api compositionì´ë¼ëŠ” ë†ˆì„ ë³´ìž!! 

![https://i.imgur.com/NV9hOyi.png](https://i.imgur.com/NV9hOyi.png)

ìœ„ ê·¸ë¦¼ì´ API Compositionì˜ í•œ ì˜ˆì•¼. ë³´ë‹¤ì‹œë¹„ sevice A,B,Cê°€ ì¡´ìž¬í•˜ê³  ê°ê°ì˜ ì„œë¹„ìŠ¤ë“¤ë¡œë¶€í„°ì˜ ê²°ê³¼ë“¤ì„ ì¡°í•©,ì¡°ë¦½ í•´ì£¼ëŠ” API composerê°€ ìžˆì–´!!

ì´ë ‡ê²Œ ê°ê°ì˜ ê²°ê³¼ë“¤ì„ ì¡°ë¦½í•´ì£¼ëŠ” API composerë¥¼ í†µí•´ ê°ê°ì˜ ì„œë¹„ìŠ¤ì˜ ë°ì´í„°ë“¤ì„ ëª¨ì•„ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì œê³µí•˜ëŠ” ë°©ì‹ì„ API Compositionì´ë¼ê³  í•´!!

ì´ ì¹œêµ¬ì˜ ìž¥ì ì„ ë­˜ê¹Œ?? ë°”ë¡œ Simple and Simple and Simple! ì´ì•¼!! ë§Œì•½ **ì¡°í•©í•´ì•¼í•˜ëŠ” ë°ì´í„°ê°€ ë§Žì§€ ì•Šë‹¤ë©´** ì´ ë°©ë²•ì„ ê³ ë ¤í•´ë³¼ ìˆ˜ ìžˆì§€!! 

B.U.T ì—¬ëŸ¬ ì„œë¹„ìŠ¤ë“¤ì„ í˜¸ì¶œí•´ì„œ ì¡°í•©í•´ì•¼í•˜ëŠ” ê²½ìš° ìœ„ ë°©ë²•ì€ ì¢‹ì§€ ì•Šì„ ìˆ˜ ìžˆì–´. 

ì™œëƒí•˜ë©´ ê²°ê³¼ì ìœ¼ë¡œ API Composerê°€ ë©”ëª¨ë¦¬ìƒì—ì„œ ê°ê°ì˜ ê²°ê³¼ë“¤ì„ ì¡°í•©í•´ì•¼í•˜ê³  ì´ëŠ” ê·œëª¨ê°€ ì»¤ì§€ë©´ ë¶€ë‹´ìœ¼ë¡œ ë‹¤ê°€ì™€!! ê·¸ë¦¬ê³  ê°ê°ì˜ ì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œí•˜ëŠ” ë¶€ë¶„ì— ìžˆì–´ì„œ ë§Œì•½ ë™ê¸°ë°©ì‹ìœ¼ë¡œ ë§Œë“¤ì–´ì¡Œë‹¤ë©´ Delayê°€ ë°œìƒí• ìˆ˜ë„ ìžˆì„ê±°êµ¬ ê°ê°ì˜ ì„œë¹„ìŠ¤ë“¤ë¡œ ë³´ë‚¸ ìš”ì²­ì´ ìž˜ì™”ëŠ”ì§€ í˜¹ì€ ë”°ë¡œ ê²€ì‚¬í•´ë´ì•¼í•  ì¡°ê±´ë“¤ì„ ì²˜ë¦¬í•˜ëŠ” ë¡œì§ë“¤ì´ ì¶”ê°€ë˜ì–´ì§ˆí…ë° ì´ëŸ¬í•œ ë¶€ë¶„ë„ ê·œëª¨ê°€ ì»¤ì§€ë©´ ìš°ë¦¬ composer ì¹œêµ¬ê°€ ë¶€ë‹´ì´ ë˜ì–´ì§€ì§€!!

ê·¸ëž˜ì„œ ê·¸ ë‹¤ìŒ ë°©ë²•ì„ ìƒê°í•´ë‚¸ê±°ì¥ ðŸ˜®

### 2. CQRS

![https://i.imgur.com/ZI1mODa.png](https://i.imgur.com/ZI1mODa.png)

CQRSì— ëŒ€í•´ì„œëŠ” ë”°ë¡œ ì •ë¦¬ë¥¼ í•˜ê¸°ë„ í–ˆì—ˆìœ¼ë‹ˆ ê°„ë‹¨í•˜ê²Œ ìŠ¤ìŠ¥í•˜ê³  ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤!!

CUD ì¦‰ ì‹œìŠ¤í…œì˜ ì •ë³´ë¥¼ ë³€ê²½í•˜ëŠ” ìž‘ì—…ë“¤ì´ ë°œìƒí•˜ë©´ í•´ë‹¹ ì •ë³´ë¥¼ í¬í•¨í•œ Eventë¥¼ ë°œí–‰ì‹œí‚¤ê³  Queryë¥¼ ë‹´ë‹¹í•˜ëŠ” ìª½ì—ì„œ í•´ë‹¹ Eventë¥¼ êµ¬ë…í•˜ê³  ìžˆê¸°ì— ì´ë¥¼ ë°›ê²Œ ë  ë•Œ ë³€ê²½ëœ ë°ì´í„°ì— ëŒ€í•œ ë™ê¸°í™” ìž‘ì—…ì„ Queryìš© Databaseì— í•˜ëŠ”ê±°ì•¼!! 

ì´ë ‡ê²Œ ë  ê²½ìš° ê·¸ ì „ API Compositionì—ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œì ë“¤ì„ í•´ê²°í•  ìˆ˜ ìžˆì–´!!

B.U.T ìœ„ ê·¸ë¦¼ì—ì„œë„ ëŠë‚Œì´ ì˜¤ì§€ë§Œ í™•ì‹¤ížˆ API Compositionë°©ë²•ì— ë¹„í•´ì„œëŠ” ë” Complexí•˜ë‹¤ëŠ” ë‹¨ì ì´ ì¡´ìž¬í•´.

ê·¸ë•Œê·¸ë•Œ ìƒí™©ì— ë§žì¶”ì–´ ë” íš¨ìœ¨ì ì¸ ë°©ì•ˆì„ íƒí•˜ë©´ ë  ê±° ê°™ë‹¤ ì´ë§ì´ì•¼!! 

> ì¶œì²˜ : [https://learn.co/lessons/microservices-patterns-chapter-7](https://learn.co/lessons/microservices-patterns-chapter-7)